[global]
pid = /var/run/php-fpm.pid
emergency_restart_threshold = 10
emergency_restart_interval = 1m
process_control_timeout = 10
log_level = notice
error_log = /proc/self/fd/2
daemonize = no

[www]
; Unnecessary because run as non root
user = php
group = php

listen = 127.0.0.1:9000
catch_workers_output = yes
decorate_workers_output = no

; Allow access to the environment variables that were passed on to Docker
clear_env = no

; if we send this to /proc/self/fd/1, it never appears
access.log = /proc/self/fd/2
slowlog = /proc/self/fd/2

; Request
request_slowlog_timeout = 5s
request_terminate_timeout = 120s

; Process manager
pm = dynamic
pm.max_children = 500
pm.start_servers = 60
pm.min_spare_servers = 25
pm.max_spare_servers = 100
pm.max_requests = 1000

listen.backlog = -1

rlimit_files = 65536
rlimit_core = unlimited

; Health check
pm.status_path = /php-fpm-status
ping.path = /php-fpm-ping
ping.response = pong

; Include other configuration files
include=/etc/php81/php-fpm.d/*.conf
